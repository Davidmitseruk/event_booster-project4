!function(){function e(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){t(e);return}s.done?n(c):Promise.resolve(c).then(r,a)}function n(n){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=n.apply(t,r);function s(n){e(i,a,o,s,c,"next",n)}function c(n){e(i,a,o,s,c,"throw",n)}s(void 0)})}}function t(e,n){var t,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){var l=[s,c];if(t)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=n.call(e,o)}catch(e){l=[6,e],r=0}finally{t=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}"function"==typeof SuppressedError&&SuppressedError;var r,a="https://app.ticketmaster.com/discovery/v2/events.json?apikey=".concat("ketKoDmJUHl7Ak2zwntgxzeJRJUvRMXS","&size=").concat(20),o=1,i=[],s=1,c={itemsContainer:document.getElementById("hero__items"),paginationContainer:document.getElementById("hero__pagination")},l=Handlebars.compile("\n  <div class='hero__template'>\n    <ul class='hero__list'>\n      {{#each items}}\n        <li class='hero__item'  data-id=\"{{id}}\">\n          <div class='hero__img-wrap'>\n            <img src=\"{{image.url}}\" alt=\"{{name}}\" class=\"hero__img-teg\" />\n          </div>\n          <h2 class='hero__name'>{{name}}</h2>\n          <p class='hero__date'>{{date}}</p>\n          <span class='hero__place'>\n            <svg class='hero__place-icon' width='7' height='10'>\n              <use href='#'></use>\n            </svg>\n            {{place}}\n          </span>\n        </li>\n      {{/each}}\n    </ul>\n  </div>\n");function u(e){return h.apply(this,arguments)}function h(){return(h=n(function(e){var n,r;return t(this,function(t){switch(t.label){case 0:if(t.trys.push([0,5,,6]),51==e)return[3,3];return[4,fetch("".concat(a,"&page=").concat(e-1))];case 1:return(r=t.sent()).ok||console.error("Помилка API"),[4,r.json()];case 2:var o;if(!(i=(null==(n=t.sent()._embedded)?void 0:n.events)||[]).length)return c.itemsContainer.innerHTML='<p class="hero__message >Event not found</p>',c.paginationContainer.innerHTML="",[2];return o=l({items:i.map(function(e){var n,t,r,a,o,i=e.images||[],s=i.find(function(e){return"16_9"===e.ratio&&e.width>300})||i[0];return{id:e.id,name:e.name||"Без назви",date:(null==(t=e.dates)||null==(n=t.start)?void 0:n.localDate)||"Дата не вказана",place:(null==(o=e._embedded)||null==(a=o.venues)||null==(r=a[0])?void 0:r.name)||"Місце не вказане",image:{url:s?s.url:"#"}}})}),c.itemsContainer.innerHTML=o,d(),[3,4];case 3:c.itemsContainer.innerHTML='<p class="hero__message">No more events now</p>',d(),t.label=4;case 4:return[3,6];case 5:return console.error("Помилка:",t.sent()),c.itemsContainer.innerHTML='<p class="hero__message >Error loading events</p>',[3,6];case 6:return[2]}})})).apply(this,arguments)}function d(){var e=function(e){var i=document.createElement("button");i.textContent=e,e===o?i.classList.add("hero__btn-active"):i.classList.remove("hero__btn-active"),i.addEventListener("click",function(){u(o=e),e===r+t&&e<51-t?s=Math.min(s+1,51-n+1):e===r+t-1&&r>1?s=Math.max(1,r-1):e===a&&e<51?s=e:e===r&&r>1&&(s=Math.max(1,e-n+1)),d()}),c.paginationContainer.appendChild(i)};c.paginationContainer.innerHTML="";for(var n=5,t=Math.floor(2.5),r=s,a=Math.min(r+5-1,51),i=r;i<=a;i++)e(i);if(a<51){var l=document.createElement("span");l.classList.add("hero__dots"),l.textContent="...",c.paginationContainer.appendChild(l);var h=document.createElement("button");h.textContent=51,51===o?h.classList.add("hero__btn-active"):h.classList.remove("hero__btn-active"),h.addEventListener("click",function(){o=51,s=Math.max(1,51-n+1),u(o)}),c.paginationContainer.appendChild(h)}}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}"use strict";u(o);var m=document.querySelector(".header__search"),f=document.querySelector("#hero__items");function v(){return(v=n(function(e){var n,r,a,o,i,s,c;return t(this,function(t){switch(t.label){case 0:n=[],r=0,a=1,t.label=1;case 1:t.trys.push([1,6,,7]),t.label=2;case 2:if(!(r<a))return[3,5];return[4,fetch("".concat("https://app.ticketmaster.com/discovery/v2/events.json?apikey=L7VlP0GtWQZMHhIkOqz3A3FcxX8k8AWD","&keyword=").concat(e,"&size=20&page=").concat(r))];case 3:return[4,t.sent().json()];case 4:return c=(null==(i=(s=t.sent())._embedded)?void 0:i.events)||[],(o=n).push.apply(o,function(e){if(Array.isArray(e))return p(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,n){if(e){if("string"==typeof e)return p(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,void 0)}}(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s.page.totalPages,r++,[3,2];case 5:return[3,7];case 6:return console.log(t.sent()),[3,7];case 7:return[2,n]}})})).apply(this,arguments)}function _(){return(_=n(function(e){var n;return t(this,function(t){switch(t.label){case 0:return[4,function(e){return v.apply(this,arguments)}(e)];case 1:var r;if(0===(n=t.sent().filter(function(n){return n.name.toLowerCase().includes(e.toLowerCase())})).length)return f.innerHTML="<h2>There are no such events</h2>",[2];return r=n.slice(0,20),f.innerHTML=Handlebars.compile("\n      <div class='hero__template' >\n        <ul class='hero__list'>\n          {{#each this}}\n            <li class='hero__item' data-id=\"{{id}}\">\n              <div class='hero__img-wrap'>\n                  <img src=\"{{images.0.url}}\" alt=\"{{name}}\" class=\"hero__img-teg\"/>\n              </div>\n              <h2 class='hero__name'>{{name}}</h2>\n              <p class='hero__date'>{{dates.start.localDate}}</p>\n              <span class='hero__place'>\n                <svg class='hero__place-icon' width='7' height='10'>\n                  <use href='#'></use>\n                </svg>\n                {{_embedded.venues.0.name}}\n              </span>\n            </li>\n          {{/each}}\n        </ul>\n      </div>\n    ")(r),[2]}})})).apply(this,arguments)}m.addEventListener("input",function(e){e.preventDefault(),clearTimeout(r),r=setTimeout(n(function(){return t(this,function(e){switch(e.label){case 0:return[4,function(e){return _.apply(this,arguments)}(m.value.trim())];case 1:return e.sent(),[2]}})}),500)});var g=document.getElementById("themeToggle");g.addEventListener("click",function(){document.body.classList.toggle("light-theme"),document.body.classList.contains("light-theme")?g.textContent="DARK THEME":g.textContent="BLACK THEME"})}();
//# sourceMappingURL=event_booster-project4.670d21bd.js.map
